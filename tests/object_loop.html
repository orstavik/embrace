<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Embrace - Object Iteration Test</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 20px;
        }

        .user-card {
            border: 1px solid #ddd;
            padding: 10px;
            margin: 10px 0;
            border-radius: 8px;
        }
    </style>
</head>

<body>
    <h1>Object Iteration & Scope Test</h1>
    <div id="app">
        <template>
            <h2>Users (Version: {{metadata.version}})</h2>
            <template for="user of users">
                <div class="user-card">
                    <strong>Key:</strong> {{$user}}<br>
                    <strong>Index:</strong> {{#user}}<br>
                    <strong>Name:</strong> {{user.name}}<br>
                    <strong>Role:</strong> {{user.role}}<br>
                    <small>Metadata inside loop: {{metadata.updated}}</small>
                </div>
            </template>
        </template>
    </div>

    <script type="module">
        import { embrace } from "../src/v26x.js";
        async function run() {
            const data = await (await fetch("object_loop.json")).json();
            embrace(document.getElementById("app"), data);
        }
        run();
    </script>
</body>

</html>